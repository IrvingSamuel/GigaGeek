var Product=function(){return{updateProgressBar:function(product,variantCount){let precent=null;if(product){let coountmax=$(".count-product-progress").attr("data-instock_max");precent=variantCount*100/coountmax+"%",variantCount>coountmax?$(".count-product-progress_wrapp").slideUp(300):$(".count-product-progress_wrapp").slideDown()}else precent=0;$(".count-product-progress__bar").width(precent)},updatePrice:function(product,variantId,selector){let price="",oldPrice="",save_money="",save_percent="";product.prices.forEach(item=>{item.id===variantId&&(price=item.price)}),product.compare_prices.forEach(item=>{item.id===variantId&&(oldPrice=item.compare_price,save_money=oldPrice.replace(/[^.0-9]/gim,"")-price.replace(/[^.0-9]/gim,""),save_percent=100-price.replace(/[^.0-9]/gim,"")*100/oldPrice.replace(/[^.0-9]/gim,""),save_percent=save_percent.toFixed(2))}),selector.find(".product-regular-price").html(price),oldPrice!=""?(selector.find(".save_money_block").css("display","inline-block"),selector.find(".old-price").css("display","inline-block"),selector.find(".old-price").html(oldPrice),selector.find(".save_money .money").html(save_money.toFixed(2)),selector.find(".save_percent").html("("+save_percent+"%)")):(selector.find(".old-price").css("display","none"),selector.find(".save_money_block").css("display","none")),update_currencies()},updateShortInfo:function(variant,variantCount,selector){let infoList=$(".short-product-info");infoList.length>0&&(variant?($(".js-option.active").each(function(){$(this).removeClass("disable")}),infoList.find(".btn-add-to-cart").removeAttr("disabled"),$(".shopify-payment-button__button").removeAttr("disabled"),variant.sku&&selector.find(".product-sku").text(variant.sku),variant.barcode&&selector.find(".product-barcode").text(variant.barcode),selector.find(".product-count").text(variantCount)):($(".js-option.active").each(function(){$(this).addClass("disable")}),$(".shopify-payment-button__button").attr("disabled","true"),infoList.find(".btn-add-to-cart").attr("disabled","true"),infoList.find(".product-count").text("0")))},updateAddButton:function(variantCount,selector){let soldOutText=selector.find(".btn-add-to-cart").attr("data-soldout"),addToCartText=selector.find(".btn-add-to-cart").attr("data-addtocart");variantCount==0&&selector.find('.product-single__variants option[selected="selected"]').attr("disabled")=="disabled"?(selector.find(".shopify-payment-button__button").prop("disabled",!0),selector.find(".btn-add-to-cart").prop("disabled",!0),selector.find(".btn-add-to-cart span").text(soldOutText),selector.find(".product-flag.sold-out").show()):(selector.find(".shopify-payment-button__button").prop("disabled",!1),selector.find(".btn-add-to-cart").prop("disabled",!1),selector.find(".btn-add-to-cart span").text(addToCartText),selector.find(".product-flag.sold-out").hide())},updatePhotoProduct:function(variant){if(variant.featured_image){let idImage=variant.featured_image.id,photoSliderItem=$(`.product-photos-list-item[data-image-id="${idImage}"]`);if(photoSliderItem.length>0&&($(".product-photos-list-item").removeClass("active"),photoSliderItem.addClass("active")),$(".product_slider_three_img").hasClass("owl-loaded")){let pos=$(`.product-image-item[data-image-id="${idImage}"]`).data("position");$(window).outerWidth()>481&&(pos=pos-1),$(".product-image-item").closest(".owl-item").removeClass("active"),setTimeout(function(){$(".product_slider_three_img").trigger("to.owl.carousel",[pos,300])},100)}if($(".product_layout_slider").hasClass("owl-loaded")){let pos=$(`.product-image-item[data-image-id="${idImage}"]`).data("position");$(".product-photos-list-item").removeClass("active"),$(".product-image-item").closest(".owl-item").removeClass("active"),$(`.product-photos-list-item[data-image-id="${idImage}"]`).addClass("active"),setTimeout(function(){$(".product_layout_slider").trigger("to.owl.carousel",[pos,300])},100)}if($(".product-photos-list").hasClass("owl-carousel")){let pos=photoSliderItem.find(".product-single__thumbnail").data("position");photoSliderItem.find(".product-single__thumbnail img").click(),setTimeout(function(){photoSliderItem.closest(".product-photos-list").trigger("to.owl.carousel",[pos,300])},100)}else photoSliderItem.find(".product-single__thumbnail img").click();if($(".product-photos-list").hasClass("vcarousel")){let slickItem=photoSliderItem.not(".slick-cloned"),slickSlideIndex=slickItem.data("slick-index");slickItem.addClass("active"),$(".product-photos-list").find(".slick-arrow").length!=0&&setTimeout(function(){$(".product-photos-list").slick("slickGoTo",slickSlideIndex)},300),slickItem.find(".product-single__thumbnail img").click()}if($(".product-image_without_slider").length>0){let photoWithoutSlider=$(`.product-image_without_slider[data-image-id="${idImage}"]`),posPhoto=photoWithoutSlider.position().top,heightImage=photoWithoutSlider.height(),diff=($(window).height()-heightImage)/2;$(".product-image_without_slider").removeClass("active"),photoWithoutSlider.addClass("active"),setTimeout(function(){posPhoto>0?$("html").stop().animate({scrollTop:posPhoto+diff},1500):$("html").stop().animate({scrollTop:posPhoto},1500)},300),$(document).trigger("scroll")}}},updatePhotoMiniature:function(variant,selector){let hoverEffect=selector.data("hover-effect");if(variant.featured_image){let idImage=variant.featured_image.id;switch(hoverEffect){case"fade":selector.find(".hover_change").length!=0&&(selector.find(".hover_change").removeClass("cover"),selector.find(`[data-image-id="${idImage}"]`).addClass("cover"));break;case"classic":selector.find(".thumbnail-container-image img").attr("src",variant.featured_image.src),selector.find(".thumbnail-container-image img").data("src",variant.featured_image.src);break;case"slider":let photoSliderItem=selector.find(`.hover-slider-item[data-image-id="${idImage}"]`),pos=photoSliderItem.data("position");photoSliderItem.closest(".hover-slider").trigger("to.owl.carousel",[pos,300]);break}if(selector.length>0){let photoSliderItem=selector.find(`.qw-product-images-item[data-image-id="${idImage}"]`),pos=photoSliderItem.data("position");setTimeout(function(){photoSliderItem.closest(".qw-product-images").trigger("to.owl.carousel",[pos,300])},100)}}},updateOptions:function(product,defaultVariantId,selector,callback){let variants={},variantsSelected={},defaultOption,selectedVariantsId=null,url=window.location.href;product.variants.forEach(variant=>{variant.id===+defaultVariantId&&variant.options.forEach((option,index)=>{variants[product.options[index]]=""+option,option.indexOf("_double_quote")!=-1?selector.find(`.js-option[data-value='${option.replace("_double_quote",'"')}']`).addClass("active"):option.indexOf("_single_quote_")!=-1?selector.find(`.js-option[data-value="${option.replace("_single_quote_","'")}"]`).addClass("active"):(selector.find(`.js-option[data-value="${option}"]`).addClass("active"),selector.find(`.select-option .js-option[data-value="${option.toLowerCase()}"]`).attr("selected","true"))})});const url_product=window.location.href.replace(window.location.search,"");selector.find(`.product-single__variants option[value="${defaultVariantId}"]`).attr("selected",!0),defaultOption=selector.find(`.product-options_all .js-option[data-optionid="${defaultVariantId}"]`).addClass("active").html(),selector.find(".all_in_one_select .selected_item").html(defaultOption),selector.find(".product-options .js-option").on("click",e=>{let clicked=$(e.target).closest(".js-option").attr("data-value_down"),clickedelem=selector.find(`.product-options .js-option[data-value_down="${clicked}"]`);clickedelem.nextAll(".js-option").removeClass("active"),clickedelem.prevAll(".js-option").removeClass("active"),clickedelem.addClass("active");let elem;$(e.target).closest("select").length>0?elem=$(e.target).find("option:selected"):elem=$(e.target).closest(".js-option");let value=elem.closest(".product-options").attr("data-section-name");url="",value&&(variants[value]=elem.data("value").toString().replace("'","_single_quote_").replace('"',"_double_quote")),elem.nextAll(".js-option").removeClass("active"),elem.prevAll(".js-option").removeClass("active"),elem.addClass("active"),selector.find(".product-single__variants option").each(function(){let titles;if(product.options.length>1){titles=$(this).data("title").split(" / ");for(let i=0;i<titles.length;i++)variantsSelected[product.options[i]]=titles[i].replace("'","_single_quote_").replace('"',"_double_quote")+""}else titles=$(this).data("title")+"",variantsSelected[product.options[0]]=titles.replace("'","_single_quote_").replace('"',"_double_quote")+"";if(JSON.stringify(variants).toLowerCase()===JSON.stringify(variantsSelected).toLowerCase())return selector.find(".product-single__variants option").removeAttr("selected"),$(this).attr("selected","true"),selectedVariantsId=$(this).attr("value"),!1;selectedVariantsId=null,$(this).removeAttr("selected")}),selector.find(".product-single__variants_footer option").each(function(){let titles;if(product.options.length>1){titles=$(this).data("title").split(" / ");for(let i=0;i<titles.length;i++)variantsSelected[product.options[i]]=titles[i].replace("'","_single_quote_").replace('"',"_double_quote")+""}else titles=$(this).data("title")+"",variantsSelected[product.options[0]]=titles.replace("'","_single_quote_").replace('"',"_double_quote")+"";if(JSON.stringify(variants)===JSON.stringify(variantsSelected))return selector.find(".product-single__variants_footer option").removeAttr("selected"),$(this).attr("selected","true"),selectedVariantsId=$(this).attr("value"),!1;selectedVariantsId=null,$(this).removeAttr("selected")}),update_currencies(),selectedVariantsId?(callback(product,selectedVariantsId,selector),$("body").hasClass("template-product")&&$(e.target).closest(".product-single").length>0&&(url=url_product+`?variant=${selectedVariantsId}`,+history.pushState({},null,url))):(Product.updateShortInfo(null,0),Product.updateProgressBar(null,0),Product.updateAddButton(0,selector))}),selector.find("select.product-options").on("change",e=>{let elem=$(e.target),value=elem.data("section-name"),clicked=$(e.target).find(":selected").attr("data-value_down");selector.find(`select.product-options[data-section-name="${value}"] [data-value_down="${clicked}"]`).attr("selected","true"),url="",value&&(variants[value]=elem.val().toString().replace("'","_single_quote_").replace('"',"_double_quote")),selector.find(".product-single__variants option").each(function(){let titles,selected;if(product.options.length>1){titles=$(this).data("title").split(" / ");for(let i=0;i<titles.length;i++)variantsSelected[product.options[i]]=titles[i].replace("'","_single_quote_").replace('"',"_double_quote")+""}else titles=$(this).data("title")+"",variantsSelected[product.options[0]]=titles.replace("'","_single_quote_").replace('"',"_double_quote")+"";if(JSON.stringify(variants)===JSON.stringify(variantsSelected))return selector.find(".product-single__variants option").removeAttr("selected"),$(this).attr("selected","true"),selected=$(this).attr("data-sku"),selector.find(".product-single__variants_footer option").removeAttr("selected"),selector.find(`.product-single__variants_footer option[data-sku="${selected}"]`).attr("selected","true"),selectedVariantsId=$(this).attr("value"),!1;selectedVariantsId=null,$(this).removeAttr("selected")}),update_currencies(),selectedVariantsId?(callback(product,selectedVariantsId,selector),$("body").hasClass("template-product")&&$(e.target).closest(".product-single").length>0&&(url=url_product+`?variant=${selectedVariantsId}`,+history.pushState({},null,url))):(Product.updateShortInfo(null,0),Product.updateProgressBar(null,0),Product.updateAddButton(0,selector))}),selector.find(".all_in_one_select .js-option").on("click",e=>{let elem=$(e.target);elem.hasClass("js-option")||(elem=elem.closest(".js-option")),elem.nextAll(".js-option").removeClass("active"),elem.prevAll(".js-option").removeClass("active"),elem.addClass("active");let value=elem.attr("data-value"),selected=elem.attr("data-value");url="",selector.find(".product-single__variants option").each(function(){let title=$(this).data("title"),selected_elem;if(JSON.stringify(title).toLowerCase()===JSON.stringify(value).toLowerCase())return selector.find(".product-single__variants option").removeAttr("selected"),$(this).attr("selected","true"),selected_elem=$(this).attr("value"),selector.find(".product-single__variants_footer option").removeAttr("selected"),selector.find(`.product-single__variants_footer option[value="${selected_elem}"]`).attr("selected","true"),selectedVariantsId=$(this).attr("value"),selected=selector.find(`.product-options_all .js-option[data-optionid="${selectedVariantsId}"]`).html(),selector.find(".all_in_one_select .selected_item").html(selected),!1;selectedVariantsId=null,$(this).removeAttr("selected")}),update_currencies(),selectedVariantsId&&(callback(product,selectedVariantsId,selector),$("body").hasClass("template-product")&&$(e.target).closest(".product-single").length>0&&(url=url_product+`?variant=${selectedVariantsId}`,+history.pushState({},null,url)))})}}}();
//# sourceMappingURL=/cdn/shop/t/33/assets/variants-utils.js.map?v=54033088820187780931654592880
